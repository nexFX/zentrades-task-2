<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task 2</title>
    <link rel="stylesheet" href="../css/style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
</head>
<body>
  <section class="container-fluid mt-2">
    <p><b>Import Products</b></p>
    <div class="row m-2">
        <div class="col-lg-6">
            <div class="card p-2 h-100 ">
                <div class="card-body">
                    <div class="row">
                        <div class="col-6">
                            <p class="card-text1">Step 1:</p>
                        </div>
                        <div class="col-6">
                            <div class="section">
                                <p class="card-text2">Select File</p>
                                <input type="file" id="myFile" name="filename">
                                <button onclick="handleFile()">Upload</button>
                            <br>
                            <p>Supported File Type(s): .CSV, .JSON</p>
                            </div>
                            
                        </div>
                    </div>
                </div>
                
            </div>
        </div>
        <div class="col-lg-6">
            <div class="card p-2 h-100">
                <div class="card-body">
                    <div class="row">
                        <div class="col-6">
                            <p class="card-text1">Step 2:</p>
                        </div>
                        <div class="col-6">
                            <div class="section">
                                <p class="card-text2">Specify Format</p>
                                <form action="/action_page.php">
                                    <label for="file type">File Type:</label>
                                    <select name="file type" id="file_type">
                                      <option value="csv">.CSV</option>
                                      <option value="json">.JSON</option>
                                    </select>
                                    <br><br>
                                    <label for="char">Character Encoding:</label>
                                    <select name="char encoding" id="char_enc">
                                      <option value="utf-8">UTF-8</option>
                                    </select>
                                    <br><br>
                                    <label for="delimiter">Delimiter:</label>
                                    <select name="delimiter" id="delimiter">
                                      <option value="comma">comma</option>
                                    </select>
                                    <br><br>
                                    <label for="header">Has Header</label>
                                    <input type="checkbox" id="header_check" name="header">

                                  </form>
                            </div>
                            
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row m-2">
        <div class="col-12">
            <div class="card p-2 h-100">
                <div class="card-body">
                    <div class="row">
                        <div class="col-6">
                            <p class="card-text1">Step 3:</p>
                        </div>
                        <div class="col-6">
                            <div class="section-down">
                                <p class="card-text2">Display Handling</p>
                            <p>Select the Fields to be displayed</p>
                            </div>
                            
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
  </section>
  
    


    <script>
    function readCSV(file) {
      return new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.readAsText(file);
        reader.onload = () => {
          const lines = reader.result.split('\n');
          const headers = lines[0].split(',').map(header => header.trim());
          const data = [];
          for (let i = 1; i < lines.length; i++) {
            const values = lines[i].split(',').map(value => value.trim());
            if (values.length === headers.length) {
              const row = {};
              for (let j = 0; j < headers.length; j++) {
                row[headers[j]] = values[j];
              }
              data.push(row);
            }
          }
          resolve(data);
        };
        reader.onerror = () => {
          reject(reader.error);
        };
      });
    }

    function readJSON(file) {
      return new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.readAsText(file);
        reader.onload = () => {
          try {
            const jsonData = JSON.parse(reader.result);
            resolve(jsonData);
          } catch (error) {
            reject(error);
          }
        };
        reader.onerror = () => {
          reject(reader.error);
        };
      });
    }

    function handleFile() {
      const fileInput = document.getElementById('fileInput');

      const file = fileInput.files[0];

      if (!file) {
        console.error('Please select a file.');
        return;
      }

      if (file.type === 'text/csv') {
        readCSV(file)
          .then(csvData => {
            console.log('CSV Data:', csvData);
          })
          .catch(error => {
            console.error('Error:', error);
          });
      } else if (file.type === 'application/json') {
        readJSON(file)
          .then(jsonData => {
            console.log('JSON Data:', jsonData);
          })
          .catch(error => {
            console.error('Error:', error);
          });
      } else {
        console.error('Unsupported file type. Please select a CSV or JSON file.');
      }
    }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
</body>
</html>